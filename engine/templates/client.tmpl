// Code generated by engine.go; DO NOT EDIT.
package generated

import (
	"bytes"
	"encoding/json"
	"fmt"
	"io"
	"net/http"
	"net/url"
	"strconv"
	
	// Import the main package to access the original types
	"github.com/jackparsonss/vertex/cmd/{{ .PackageName }}"
)

{{range .Functions}}
// {{.Name}} is a client wrapper that calls the server function
func {{.Name}}({{range $index, $param := .Params}}{{if $index}}, {{end}}{{.Name}} {{.Type}}{{end}}) {{.ReturnType}} {
	{{if eq .Method "GET"}}
	// Build query string
	query := url.Values{}
	{{range .Params}}
	{{if eq .Type "string"}}
	query.Set("{{.Name}}", {{.Name}})
	{{else if eq .Type "int"}}
	query.Set("{{.Name}}", strconv.Itoa({{.Name}}))
	{{end}}
	{{end}}

	// Make GET request
	resp, err := http.Get(fmt.Sprintf("http://localhost:8080{{.Path}}?%s", query.Encode()))
	{{else}}
	// Prepare request body
	requestBody, _ := json.Marshal(map[string]interface{}{
		{{range .Params}}"{{.Name}}": {{.Name}},
		{{end}}
	})

	// Make POST request
	resp, err := http.Post("http://localhost:8080{{.Path}}", "application/json", bytes.NewBuffer(requestBody))
	{{end}}
	if err != nil {
		fmt.Printf("Error making HTTP request: %v\n", err)
		{{if .IsSlice}}
		return nil
		{{else if eq .ReturnType "string"}}
		return ""
		{{else if eq .ReturnType "int"}}
		return 0
		{{else if eq .ReturnType "bool"}}
		return false
		{{else if eq .ReturnType "float64" "float32"}}
		return 0.0
		{{else}}
		var zero {{.ReturnType}}
		return zero
		{{end}}
	}
	defer resp.Body.Close()

	// Parse response
	responseData, err := io.ReadAll(resp.Body)
	if err != nil {
		fmt.Printf("Error reading response: %v\n", err)
		{{if .IsSlice}}
		return nil
		{{else if eq .ReturnType "string"}}
		return ""
		{{else if eq .ReturnType "int"}}
		return 0
		{{else if eq .ReturnType "bool"}}
		return false
		{{else if eq .ReturnType "float64" "float32"}}
		return 0.0
		{{else}}
		var zero {{.ReturnType}}
		return zero
		{{end}}
	}

	// Decode response based on return type
	var result {{.ReturnType}}
	if err := json.Unmarshal(responseData, &result); err != nil {
		fmt.Printf("Error parsing response: %v\n", err)
		{{if .IsSlice}}
		return nil
		{{else if eq .ReturnType "string"}}
		return ""
		{{else if eq .ReturnType "int"}}
		return 0
		{{else if eq .ReturnType "bool"}}
		return false
		{{else if eq .ReturnType "float64" "float32"}}
		return 0.0
		{{else}}
		var zero {{.ReturnType}}
		return zero
		{{end}}
	}
	
	return result
}
{{end}}
